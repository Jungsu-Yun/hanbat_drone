# **1. 드론의 정의 및 역사**

## **1-1. 개요**
----
**'드론'**, 이름조차 생소했던 이 물건은 어느새 우리 삶 아주 가까이 와있습니다. 취미용부터 농업·산업·군·경찰·소방 등 각 분야는 물론, 앞으로 다가올 4차 산업혁명의 핵심으로 부상하고 있습니다.<br>
<center><img src="https://user-images.githubusercontent.com/31683091/68993679-240f1c80-08be-11ea-8f12-97c23c250c9e.jpg" width=500></img><br>
다양한 분야에서 활용되는 드론</center> <br><br>

## **1-2. 드론은 무엇인가.. 드론의 정의**
----
드론이란 단어는 주변에서 너무나 많이 듣고 있지만 막상 "무엇을 드론이라 하나요?"하고 물어보면 말문이 탁 막히게 됩니다. 우리의 머릿속에는 익숙한 드론의 모습이 그려지지만 한마디로 뭐라고 설명해야 할까요?
<center><img src="https://user-images.githubusercontent.com/31683091/68993741-b6afbb80-08be-11ea-8d32-833d9c20c4c4.jpg" width = 500></img>

*드론: 사람이 타지 않고 무선전파의 유도에 의해서 비행하는 비행기나 헬리콥터 모양의 미행체 - 두산백과사전*</center><br>
사전상 의미는 조금 제한적이란 느낌이 듭니다. 드론의 형태를 '비행기나 헬리콥터 모양'이라고 특정지었기 때문입니다. 그러나 최근에는 형태나 사용 장소(공중·수중·수상·육상)와 관계 없이 무선으로 조종하는 기계들을 모두 드론이라고 부르는 경향이 있습니다.
<center><img src="https://user-images.githubusercontent.com/31683091/68993825-9b917b80-08bf-11ea-8e4f-f2bddabc705e.png" width = 500></img><br>
다양한 형태의 드론 모습들(UAV, UUV, UMV, UGV)</center><br>

그만큼 드론이라는 이름이 우리에게 익숙해진 결과겠지요. 그럼 법률상의 드론은 어떻게 정의되고 있을까요?<center><br>

*항공안전법 제2조 3호<br> '초경량비행장치'란 항공기와 경량항공기 외에 공기의 반작용으로 뜰 수 있는 장치로서 자체중량, 좌석수 등 국토교통부령으로 정하는 기준에 해당되는 동력비행장치, 행글라이더, 패러글라이더, 기구류 및 **무인비행장치** 등을 말한다.*
<br><br>
<img src="https://user-images.githubusercontent.com/31683091/68993968-a4368180-08c0-11ea-8657-ef1804fbfcf3.jpg" width = 500></img>
</center><br>

우리가 생각하는 드론은 법률적으로는 항공안전법 상의 **초경량비행장치**에 속한다.
<br><br>

## **1-3. 드론이라는 단어의 어원**
----
그렇다면 드론이라는 말은 어떻게 생겨나게 되었을까요? 이에 대한 유력한 설이 두가지가 있습니다.<br>
먼저 첫번째 설은 드론의 소리가 수벌이 윙윙거리는 소리와 매우 유사하여 **수벌(Drone)** 이라고 부르게 되었다는 것입니다.
<br>
<center><img src="https://user-images.githubusercontent.com/31683091/68994024-553d1c00-08c1-11ea-82ee-52e12315549c.jpg" width = 500></img></center>

두번째 설은 1930년대 초 영국에서 포격연습용 비행체 DH-82, Queen Bee(여왕벌)를 만들었는데, 여왕의 나라인 영국에서 여왕벌이라는 이름의 비행체를 포격한다는 것이 부적절하다고 하여 Queen Bee(여왕벌) 대신 **Drone(수벌)** 으로 바꾸어 부르게 되었고, 이때부터 무인비행체를 드론(Drone)부르게 되었다는 것입니다.

두가지 설 모두 그럴듯 합니다. 하지만 윙윙거리는 드론 특유의 소리는 쿼드콥터의 전형적인 소리인데, 초창기 드론의 형태는 쿼드콥터가 아니었던 만큼, 제 개인적인 생각에는 두번째 가설이 더 설득력이 있어 보입니다.
<br><br>


## **1-4. 드론의 개발 역사**
----
드론은 언제부터, 왜 개발하게 되었을까요? 드론은 처음에 군사 목적을 위해 탄생했따는 것은 이미 널리 알려진 사실입니다. 특히, 1,2차 세계대전 당시 효과적인 무기로서 집중적으로 연구되기 시작되었습니다. 여러 비행체 중 드론의 가장 큰 특징은 무인조종입니다. 전쟁에서 무인 공격무기는 아군, 특히 조종사의 희생을 줄일 수 있는 만큼 매우 매력적인 아이템입니다.
<br>
<center><img src="https://user-images.githubusercontent.com/31683091/68994125-c8935d80-08c2-11ea-80a2-b3716939a4e6.jpg" width = 500></img><br>
초기에는 주로 열기구 형태의 무인공격무기를 고안했습니다. 열기구에 폭탄을 매달아
<br>지정된 위치 또는 시간에 맞춰 떨어뜨리는 방법입니다.</center><br>

그러나 이는 현대적인 의미의 원격조종에는 미치지 못한다고 보여야 할 것입니다. 1898년 미국 과학자 니콜라 테슬라(Nikola Tesla)가 선박을 무선으로 조종하는 기술을 최초로 선보인 후 본격적인 드론 연구가 시작되었습니다. 그 후 미 육군은 '항공타겟프로젝트(Arial Target Project)를 진행하면서 무인기 개발을 시작 했으며, 1917년에 에어리얼 토페토(Aerial torpedo)를 개발했습니다. 무인기에 폭탄을 싣고 원격조종으로 적을 타개하는 개념입니다.

<center><img src="https://user-images.githubusercontent.com/31683091/68994163-3b9cd400-08c3-11ea-8769-7ce1db78dddc.jpg" width = 500></img><br>
에어리얼 토페도 사진</center><br>

이를 시작으로 비슷한 개념의 비행체들이 줄줄이 등장하게 됩니다. 하지만 이떄까지는 폭탄을 싣고 목표물에 떨어지면 임무가 끝나는 1회용 기체들이었습니다. 그러던 중 영국에서 개발된 것이 위에 언급한 DH-82, Queen Bee이며, 최초로 재사용이 가능한 드론이었습니다. 현재 드론의 실질적인 원조로 보는 비행체 입니다.

<center><img src="https://user-images.githubusercontent.com/31683091/68994191-8b7b9b00-08c3-11ea-91f2-7665f325cbb1.jpg" width = 500></img><br>
DH-82, Queen Bee</center><br>

Queen Bee 이후 드론은 비약적인 발전을 하게 됩니다. 생산대수 또한 단일 기종으로 만대가 넘는 드론이 탄생하는가 하면, 제트엔진 장착, 단순 포격용에서 벗어나 정찰용 개발 등 기술과 활용도 면에서 많은 변화를 겪게 됩니다. 특히 미군의 경우 드론의 효용성을 일찌감치 간파하여 드론의 개발에 많은 투자를 하고 있습니다. 물론 중국의 드론 투자 및 기술 또한 세계 일류 수준입니다. 미국은 '글로벌 호크'와 같은 고성능의 대형 드론은 물론, 병사 개인이 휴대할 수 있는 초소형 드론까지 다양한 목적과 용도의 군사용 드론을 개발하고 있습니다.

<center><img src="https://user-images.githubusercontent.com/31683091/68994234-fb8a2100-08c3-11ea-8997-48a22883b580.png" width = 500></img><br>
글로벌 호크, 블랙 호넷</center><br>

드론의 발전사를 잠시 살펴보았습니다. 사실 여러분이 '드론'하면 떠오르는 형태는 아닙니다. '비행기'하면 떠올릴만한 모습들을 하고 있습니다. 그렇다면 현재 대중화된 쿼드콥터(프로펠러가 4개인 드론) 형태의 등장은 언제일까요?

de Bothezat Quadcopter는 세계 최초의 쿼드콥터로 놀랍게도 1921년에 등장했습니다. 무게가 자그마치 1.8톤이었음에도 180마력의 추력으로 비행했다고 합니다.
<center><img src="https://user-images.githubusercontent.com/31683091/68994255-45730700-08c4-11ea-84e4-1d7f0bed4ebd.jpg" width = 500></img><br>
세계 최초의 쿼드콥터 de Bothezat Quadcopter</center><br>

드론의 시작은 군사용이지만 현재는 다른 용도로 더 많이 쓰이고 있습니다. 산업체는 물론 기업, 국가기관, 농업 등 거의 모든 분야에서 드론의 활용방법을 모색하고 있는 상황입니다.

<center><img src="https://user-images.githubusercontent.com/31683091/68994328-17da8d80-08c5-11ea-91ca-0a14029f525a.png" width = 500></img><br>
드론택배, 방제용 드론, 인명구조 드론, 시설물감시 드론</center><br>

즉, 드론의 활용가치는 무궁무진하며 향후 어떤 용도, 어떤 형태의 드론이 나올지 아무도 모른다는 것입니다. 그렇게 되면 현재 우리가 알고 있는 수많은 드론들도 그저 드론역사책의 한 페이지에 불과한 과거유물이 될 것입니다.

인명을 살상하는 군사용으로서가 아니라 생산적이고 인류에 도움이 되는 드론의 출현을 기대해 봅니다.

# **2. Drone 개발환경 설정**

## **2-1. 개요**
----
지금부터 파이썬을 활용하여 드론을 제어하는 다양한 코드를 만들어 보도록 하겠습니다. 우리가 드론을 제어하기 위해 사용할 제품은 Parrot의 Mambo라고 하는 제품입니다.

<center><img src="https://user-images.githubusercontent.com/31683091/69003717-6ed67600-094a-11ea-8207-ac29ec5bf528.jpg" width=500></img><br>
Parrot Mambo</center> <br>

Parrot Mambo는 Bluetooth 및 Wifi를 활용하여 드론을 제어할 수 있고, 집게, 미니건, 카메라 등 다양한 임무탑재장비를 장착하고 구동할 수 있다는 장점이 있습니다.

또한 우리는 이번에 Python을 활용하여 개발을 진행할 예정입니다. 파이썬은 TIOBE에서 선정하는 세계에서 가장 인기있는 프로그래밍 언어 3위를 차지할 정도로 많은 개발자들이 사용하고 있는 개발언어 입니다.

<center><img src="https://jaxenter.com/wp-content/uploads/2019/07/tiobejuly2019.png" width=500></img><br>
2019 TIOBE Index</center> <br>

또한 우리는 개발자 친화적(?)이라고 불리는 Linux 환경에서 개발을 진행할 것입니다. 또한 Parrot의 SDK는 윈도우 환경에서 Wifi 접속만 허용하고 있으며, Bluetooth연결을 통한 연결을 지원하지 않고 있기 때문에 Linux 환경에서 개발을 진행하도록 할 것입니다.

본 교재는 Linux Fedora를 기준으로 하여 개발을 진행하도록 하겠습니다.

## **2-2. 개발 환경 설정**
----
### 2-2-1. Terminal 관련 환경 설정
1. 우선 터미널 설정을 진행하도록 하겠습니다. 리눅스 메뉴바 우측을 클릭하여 톱니바퀴 모양의 설정을 클릭하도록 합니다.

<center><img src="https://user-images.githubusercontent.com/31683091/69003969-59fbe180-094e-11ea-9fe5-203c67493b7c.png" width=500></img></center>

2. 장치 - 키보드 바로가기로 이동하여 가장 밑에 있는 + 버튼을 클릭해주도록 합니다.

<center><img src="https://user-images.githubusercontent.com/31683091/69003989-b7902e00-094e-11ea-812f-4fbecc4f2314.png" width=500></img></center>

3. 새로운 단축키 설정창에서 다음과 같이 설정해주고 추가 버튼을 눌러주도록 합니다.
    * 이름: 터미널 열기
    * 명령 : gnome-terminal
    * 단축키 : Ctrl + Alt + t

<center><img src="https://user-images.githubusercontent.com/31683091/69004013-4735dc80-094f-11ea-9659-f8d99739dbd4.png" width=500></img></center>

4. Ctrl + Alt + t 단축키를 눌러 정상적으로 터미널이 열리는지 확인해보도록 합니다.

<center><img src="https://user-images.githubusercontent.com/31683091/69004027-954ae000-094f-11ea-868e-2c5817e978a1.png" width=500></img></center>

### 2-2-2. 개발 IDE 설치
이제 파이썬 코드를 작성하고 빌드하는 통합개발환경(IDE)를 설치하도록 하겠습니다. 리눅스에서 사용할 수 있는 IDE는 gedit, python-ide, visual studio code 등 다양하지만 현업에서 가장 많이 사용하는 Tool인 JetBrains의 Pycharm 제품을 사용하여 개발을 진행하도록 하겠습니다.

1. 파이어폭스를 실행하여 Jetbrains 홈페이지로 이동합니다.
<center>

<http://www.jetbrains.com>

</center>

2. Tools에서 Pycharm을 찾아서 클릭을 합니다.

<center><img src="https://user-images.githubusercontent.com/31683091/69004106-10f95c80-0951-11ea-8253-762f16ed3e4d.png" width=500></img></center>

3. 가운데의 다운로드 버튼을 클릭합니다.

<center><img src="https://user-images.githubusercontent.com/31683091/69004128-528a0780-0951-11ea-9752-9fbace7fb18f.png" width=500></img></center>

4. 우리는 오픈소스 IDE를 사용할 것이기 때문에 오른쪽의 Community의 다운로드 버튼을 클릭해주고 파일을 저장하도록 합니다.

<center><img src="https://user-images.githubusercontent.com/31683091/69004151-d04e1300-0951-11ea-858b-f8306c24873e.png" width=500></img></center>

5. 다운로드가 완료되었다면 터미널을 실행하여 파일을 다운로드 한 위치로 이동합니다. Firefox의 저장 시 기본 Default 저장경로는 다운로드 폴더이기 떄문에 본 코드는 다운로드 폴더를 기준으로 합니다.
```bash
$ cd 다운로드
```

6. 방금 다운로드 받은 파일의 압축을 해제하도록 합니다.
```bash
$ tar -zxvf pycharm-community-2019.2.4.tar.gz
```
<center><img src="https://user-images.githubusercontent.com/31683091/69004261-aeee2680-0953-11ea-90e0-217391f39dd6.png" width=500></img></center>

7. 압축을 해제한 폴더내 bin 폴더로 이동하여 pycharm.sh 파일을 실행합니다.
```bash
$ cd pycharm-community-2019.2.4
$ cd bin
$ ./pycharm.sh
```
<center><img src="https://user-images.githubusercontent.com/31683091/69004279-0be9dc80-0954-11ea-89bd-43d7dfc9133c.png" width=500></img></center>

8. 모두 기본설정으로 선택을 하도록 합니다.

<center><img src="https://user-images.githubusercontent.com/31683091/69004284-38055d80-0954-11ea-9d84-a7c95ae10618.png" width=500></img></center>

9. 본격 창이 나오게 되면 create new project를 클릭하도록 합니다.

<center><img src="https://user-images.githubusercontent.com/31683091/69004296-6b47ec80-0954-11ea-99db-a768471faead.png" width=500></img></center>

10. 프로젝트 위치를 설정해주고 Project Interpreter를 클릭하여 Existing interpreter 선택 후 오른쪽의 ... 을 클릭하도록 합니다.

<center><img src="https://user-images.githubusercontent.com/31683091/69004310-b95cf000-0954-11ea-9997-4f83788535f4.png" width=500></img></center>

11. Add Python Interpreter 설정에서 왼쪽의 System Interpreter 선택 후 python3.7이 선택되어 있는지 확인 후 Ok 버튼을 누른 뒤 create 버튼을 클릭합니다.

<center><img src="https://user-images.githubusercontent.com/31683091/69004334-fa550480-0954-11ea-9ea6-803789b81eb9.png" width=500></img></center>

12. IDE 화면에서 왼쪽의 프로젝트 폴더명에 마우스를 올려놓은 채로 마우스 우클릭 뒤 New - Python File을 선택 후 Hello_World라고 파일명 입력 후 생성을 해줍니다.

<center><img src="https://user-images.githubusercontent.com/31683091/69004339-1f497780-0955-11ea-8905-a2a9a2692c8c.png" width=500></img></center>

13. Hello World Text 출력하기 위한 코드를 입력해줍니다.
```python
print("Hello World")
```

14. Alt + Shift + f10 키를 눌러 정상적으로 빌드가 되는지 확인하도록 합니다.

<center><img src="https://user-images.githubusercontent.com/31683091/69004372-9121c100-0955-11ea-92c3-b362b1c355e2.png" width=500></img></center>

15. terminal 명령어 또는 Icon으로 Pycharm을 실행하기 위해 상단메뉴에서 Tools - Create Command Line Launcher와 Tools - Create Desktop Entry를 실행하도록 합니다.

<center><img src="https://user-images.githubusercontent.com/31683091/69004395-e231b500-0955-11ea-9172-5fa201a55280.png" width=500></img></center>

### 2-2-3. 개발 의존성 설치
이제 Parrot SDK와 Bluetooth 통신을 위한 의존성 Package들을 설치하도록 하겠습니다.

1. 네트워크 연결을 위한 untangle 패키지를 설치해주도록 합니다.
```bash
$ pip3 install --user untangle
```
2. 네트워크 주소 할당, hostname 자동할당, 네트워크 장치 위치 감지를 위한 zeroconf 패키지를 설치해주도록 합니다.

```bash
$ pip3 install --user zeroconf
```

3. 블루투스 통신을 위한 관련 의존성 Package를 설치해주도록 합니다.
```bash
$ sudo ndf install bluez
$ sudo dnf install python-pip glib2-devel
$ pip3 install --user bluepy
```

4. Parrot SDK 패키지인 Pyparrot을 설치하도록 합니다.
```bash
$ pip3 install --user pyparrot
```

5. 예제코드를 home에 다운받도록 합니다.
```bash
$ cd
$ git clone https://github.com/amymcgovern/pyparrot
```

# **3. Pyparrot을 활용한 드론 제어**

## **3-1. 드론 연결하기**
----
### 3-1-1. **Source Code 작성하기**
* 터미널을 실행하고 pycharm 실행을 합니다.
```Bash
$ charm
```
* 새로운 프로젝트 location을 설정해주고 Project Interpreter가 Existing interpreter의 python 3.7로 설정이 되어있는지 확인을 해주고 Create 버튼을 클릭해서 프로젝트를 생성합니다.

프로젝트 생성 이미지

* project 탭의 폴더에서 connect_mambo 라는 파이썬 파일을 하나 생성하겠습니다.

이미지

* 소스코드를 다음과 같이 입력합니다.

```Python
from pyparrot.Minidrone import Mambo

mambo_address = ""

mambo = Mambo(mambo_address, use_wifi=False)

print("Connect to Mambo!")
success = mambo.connect(num_retries=5)

if success:
    print("Success Connect!")
    mambo.smart_sleep(3)
    
mambo.disconnect()
```
* 드론에 배터리를 연결하고 전원을 켠 뒤 메뉴바 우측을 클릭한뒤 블루투스 설정에 진입하도록 합니다.

블루투스 설정 이미지

* 블루투스 리스트에 본인의 Mambo 기체를 클릭하여 연결한 뒤 다시 한번더 클릭하여 Mambo의 주소값을 mambo_address = "" 값에 입력을 해주면 됩니다.

```Python
mambo_address = "D0:3A:6B:1E:E6:5A"
```

Alt + Shift + f10 키를 눌러 정상적으로 연결이 되는지 확인해보도록 하겠습니다.

```
/usr/bin/python3.7 /home/jungsu/PycharmProjects/parrot_src/connect_mambo.py
OpenCVAvailable is True
Connect to Mambo!
 trying to connect to the minidrone at address D0:3A:6B:1E:E6:5A 
 connected!  Asking for services and characteristics 
 magic handshake to make the drone listen to our commandsandsensors 
 initializing notification delegate 
Success Connect!

Process finished with exit code 0
```

* 다음과 같이 Success Connect 문구가 출력되었다면 정상적으로 출력이 이루어진 것입니다.

### 3-1-2. **Source Code 이해하기**
* 먼저 Mambo를 제어하기 위한 API 함수를 불러오는 모듈을 import 해주도록 합니다.
```Python
from pyparrot.Minidrone import Mambo
```

* 이제 Mambo의 Bluetooth 주소를 설정해주고 Mambo 객체를 생성해주도록 합니다.
```Python
mambo_address = ""

mambo = Mambo(mambo_address, use_wifi=False)
```

* 이제 Mambo를 연결해주는 connect 함수를 호출합니다. 만약 성공적으로 연결되었다면 success 변수가 True로, 연결에 실패했다면 False값이 입력되며, 에러가 발생하게 됩니다.
```Python
print("Connect to Mambo!")
success = mambo.connect(num_retries=5)
```

* success가 True일 경우 다양한 Mambo가 자동으로 이동하는 코드들을 입력하는 공간입니다.

```Python
if success:
    print("Success Connect!")
    mambo.smart_sleep(3)
```

* 이제 모든 코드가 종료되었다면 disconnect 함수를 호출하여 Mambo와의 연결을 종료하고 프로그램을 종료하게 됩니다.
```Python
mambo.disconnect()
```

해당 함수들은 이후 Mambo를 제어하기 위한 기본 골격으로 하여 다양한 기능들을 구현해보도록 하겠습니다.

## **3-2. 드론 이륙 및 착륙하기**
----
### 3-2-1. **이륙 및 착륙 Source Code 작성하기**
이제 기본 연결 이후 이륙 후 3초간 공중에서 호버링을 한 뒤 착륙을 하는 Source Code를 만들어보도록 하겠습니다.

* takeoffAndLand.py을 하나 생성해주도록 합니다.

* 다음과 같이 소스코드를 입력해주도록 합니다.

```Python
from pyparrot.Minidrone import Mambo

mambo_address = "D0:3A:6B:1E:E6:5A"

mambo = Mambo(mambo_address, use_wifi=False)

print("Connect To Mambo!")
success = mambo.connect(num_retries=3)

if success:
    print("Sleeping...")
    mambo.smart_sleep(3)

    print("Take off!")
    mambo.safe_takeoff(3)

    print("Sleeping...")
    mambo.smart_sleep(3)

    print("Take off!")
    mambo.safe_land(3)

print("Disconnect....")
mambo.disconnect()
```
* 이제 저장 후 Alt + Shift + f10 키를 눌러서 드론이 이륙, 착륙을 하는지 확인해보도록 합니다.

```Bash
/usr/bin/python3.7 /home/jungsu/PycharmProjects/parrot_src/takeoffAndLand.py
OpenCVAvailable is True
Connect To Mambo!
 trying to connect to the minidrone at address D0:3A:6B:1E:E6:5A 
 connected!  Asking for services and characteristics 
 magic handshake to make the drone listen to our commandsandsensors 
 initializing notification delegate 
Sleeping...
Take off!
Sleeping...
Take off!
 trying to land 
Disconnect....

Process finished with exit code 0
```

### 3-2-2. **이륙 및 착륙 Source Code 이해하기**

* 우선 API 함수들을 호출하고 Mambo와의 연결을 시도합니다.

```Python
from pyparrot.Minidrone import Mambo

mambo_address = "D0:3A:6B:1E:E6:5A"

mambo = Mambo(mambo_address, use_wifi=False)

print("Connect To Mambo!")
success = mambo.connect(num_retries=3)
```

* Mambo와의 연결이 완료되면 우선 3초간 지상에서 대기를 합니다.

```Python
if success:
    print("Sleeping...")
    mambo.smart_sleep(3)
```

* 이제 이륙을 하는 함수를 호출합니다. 이륙을 하는 함수는 safe_takeoff()와 takeoff() 함수로 구분되어 있습니다. safe_takeoff()함수의 경우 만약 기체가 공중에 떠있거나, 불안정한 위치에 있는 경우에는 이륙을 하지 않기 때문에 무작정 이륙을 하는 takeoff()함수 대신 사용하는것을 권장합니다.

```Python
    print("Take off!")
    mambo.safe_takeoff(3)
```

* 동일하게 3초간 공중에서 대기를 한 후 Land() 함수를 호출합니다. land()함수의 경우 자세가 불안정하거나, 굴곡진 곳에서는 착륙을 시도하지 않도록 하는 safe_land() 함수를 사용합니다. land가 이루어졌다면 이제 disconnect()함수를 통해 드론과의 연결을 종료하고 프로그램은 종료되게 됩니다.

```Python
    print("Sleeping...")
    mambo.smart_sleep(3)

    print("Take off!")
    mambo.safe_land(3)

print("Disconnect....")
mambo.disconnect()
```

## **3-3. 드론 이동하기**
----
### 3-3-1. **드론 이동 Source Code 작성하기**
다음으로는 이륙 후에 전진 - 후진 - 왼쪽 이동 - 오른쪽 이동 - 좌우 회전 - 착륙으로 이어지는 코드를 작성해보도록 하겠습니다.

* move_mambo.py 파일을 하나 생성해주도록 하고 다음과 같이 코드를 작성해주도록 합니다.

```Python
from pyparrot.Minidrone import Mambo

mambo_address = "D0:3A:6B:1E:E6:5A"

mambo = Mambo(mambo_address, use_wifi=False)

print("Connect to Mambo!")
success = mambo.connect(num_retries=3)

if success:
    print("Sleeping...")
    mambo.smart_sleep(3)

    print("Take off!")
    mambo.safe_takeoff(3)

    print("Forward!")
    mambo.fly_direct(0, 20, 0, 0, 1)
    mambo.smart_sleep(1)

    print("Backward!")
    mambo.fly_direct(0, -20, 0, 0, 1)
    mambo.smart_sleep(1)

    print("Left!")
    mambo.fly_direct(-20, 0, 0, 0, 1)
    mambo.smart_sleep(1)

    print("Right!")
    mambo.fly_direct(20, 0, 0, 0, 1)
    mambo.smart_sleep(1)

    print("Turn left!")
    mambo.fly_direct(0, 0, -20, 0, 1)
    mambo.smart_sleep(1)

    print("Turn Right!")
    mambo.fly_direct(0, 0, 20, 0, 1)
    mambo.smart_sleep(1)

    print("Land!")
    mambo.safe_land(3)

print("Disconnect....")
mambo.disconnect()
```

* 이제 저장 후 Alt + Shift + f10 키를 눌러서 드론이 이동을 하는지 확인해보도록 합니다.

```Bash
/usr/bin/python3.7 /home/jungsu/PycharmProjects/parrot_src/move_mambo.py
OpenCVAvailable is True
Connect to Mambo!
 trying to connect to the minidrone at address D0:3A:6B:1E:E6:5A 
 connected!  Asking for services and characteristics 
 magic handshake to make the drone listen to our commandsandsensors 
 initializing notification delegate 
Sleeping...
Take off!
Forward!
Backward!
Left!
Right!
Turn left!
Turn Right!
Land!
 trying to land 
Disconnect....

Process finished with exit code 0
```

### 3-2-2. **이륙 및 착륙 Source Code 이해하기**

* 우선 API 함수들을 호출하고 Mambo와의 연결을 시도합니다.

```Python
from pyparrot.Minidrone import Mambo

mambo_address = "D0:3A:6B:1E:E6:5A"

mambo = Mambo(mambo_address, use_wifi=False)

print("Connect to Mambo!")
success = mambo.connect(num_retries=3)
```

* 이제 이동을 하는 제어 코드 부분입니다. fly_direct()함수를 호출하며 인자는 다음과 같습니다.

    * yaw: 드론의 왼쪽, 이동 값. +인 경우 오른쪽으로 이동, -인 경우 왼쪽으로 이동
    * pitch: 드론의 앞, 뒤 이동 값. +인 경우 전진, -인 경우 후진
    * roll: 드론의 왼쪽, 오른쪽 이동. +인 경우 오른쪽으로 회전, -인경우 왼쪽으로 회전
    * vertical_movement: 드론 상승 하강 이동. +인 경우 상승, -인 경우 하강
    * duration: 지속시간
* 다음 값들을 바탕으로 하여 이동들이 이루어지게 됩니다.

```Python
if success:
    print("Sleeping...")
    mambo.smart_sleep(3)

    print("Take off!")
    mambo.safe_takeoff(3)

    print("Forward!")
    mambo.fly_direct(0, 20, 0, 0, 1)
    mambo.smart_sleep(1)

    print("Backward!")
    mambo.fly_direct(0, -20, 0, 0, 1)
    mambo.smart_sleep(1)

    print("Left!")
    mambo.fly_direct(-20, 0, 0, 0, 1)
    mambo.smart_sleep(1)

    print("Right!")
    mambo.fly_direct(20, 0, 0, 0, 1)
    mambo.smart_sleep(1)

    print("Turn left!")
    mambo.fly_direct(0, 0, -20, 0, 1)
    mambo.smart_sleep(1)

    print("Turn Right!")
    mambo.fly_direct(0, 0, 20, 0, 1)
    mambo.smart_sleep(1)

    print("Land!")
    mambo.safe_land(3)
```